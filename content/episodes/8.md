---
---

## Descrizione

Dopo un mese e mezzo di podcast, abbiamo annunciato l'arrivo delle dirette Twitch di live coding per costruire il nuovo sito di GitBar con Jigsaw (generatore di siti statici in PHP). Ma prima, ci siamo tuffati nei pattern ORM parlando di Active Record vs Data Mapper: il primo è come avere un ponte invisibile tra database e oggetti (facile e veloce ma accoppiato), il secondo è come avere un layer intermedio che ti libera dal database (verboso ma Domain-Driven Design friendly). Laravel vs Symfony? Eloquent vs Doctrine? Tutto dipende dal bullone che hai davanti.

## Takeaway

- L'Active Record accoppia oggetti e schema database 1:1: leggi il database e capisci l'app, ma testare diventa complesso perché ogni oggetto interagisce sempre con il DB
- Il Data Mapper (Doctrine) separa dominio e persistenza con file di configurazione (XML/YAML) o annotation: le entità hanno una sola responsabilità (business logic), non persistenza
- Laravel (Eloquent/Active Record) è RAD per prototipi rapidi, Symfony (Doctrine/Data Mapper) è enterprise per situazioni complesse con database legacy contorti
- Il pattern Active Record non ha il concetto di Unit of Work come Doctrine, quindi genera più query e le performance calano all'aumentare della complessità
- Usare ORM riduce il boilerplate SQL e permette validazione applicativa, ma può generare più query del raw SQL necessario (trade-off tra velocità di sviluppo e ottimizzazione)

## Bold Opinion

- Scrivere raw SQL nel mezzo del PHP come all'università è un crimine contro l'umanità: mischiare linguaggi richiede sforzo mentale inutile
- Il vantaggio dell'Active Record (generare oggetti dallo schema DB automaticamente) è anche il suo limite più grande quando erediti database scritti male con nomi di colonne orribili
- Non esiste il "meglio assoluto" in informatica: chi ti vende questa idea ti sta vendendo fesserie, tutto dipende dal contesto
- Il Data Mapper è più verboso ma il rischio di scadere nel modello anemico (solo getter/setter, logica tutta nel controller) è reale se non stai attento

