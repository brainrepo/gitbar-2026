---
---

## Descrizione

Dall'in studio di Radio Neurocentrale (con la voce profonda grazie ai microfoni magici), abbiamo aperto il vaso di Pandora dell'Event Sourcing e del CQRS. Invece di salvare gli stati come nel CRUD, salviamo eventi (fatti accaduti al passato) che raccontano tutta la storia: come una nave che invece di dire "sono qui" registra ogni spostamento. Il risultato? Possiamo ricostruire lo stato in qualunque momento, fare audit, correggere la storia senza pasticciare, e rispondere a domande del business che non avevamo previsto.

## Takeaway

- L'event log è una sequenza immutabile di eventi: le scritture sono solo append, mai distruttive, per cui puoi ricostruire ogni stato passato
- Gli aggregati (es: ordine + voci ordine) hanno una "porta" chiamata aggregate root che maneggia i comandi, verifica le invarianti (regole di business) e genera eventi
- Il CQRS separa comandi (write model con logica di business) e query (read model ottimizzato per visualizzazione): le projection generano snapshot dello stato per velocizzare le letture
- Sistemi con cache delle projection: salvano uno stato intermedio e applicano solo gli eventi successivi, evitando di ricalcolare tutto ogni volta
- L'event sourcing rende il sistema tollerante alla sincronicità: puoi accodare eventi anche offline senza perdere coerenza

## Bold Opinion

- Correggere la storia aggiungendo un nuovo evento compensativo è infinitamente più pulito che fare UPDATE sul database: non perdi traccia dell'errore e della correzione
- Il "what if" (cosa sarebbe successo se...) è una killer feature per il business: puoi rieseguire la storia con modifiche e vedere scenari alternativi
- Il CRUD è più efficiente per dati raw senza semantica di business, ma appena hai logica complessa stai solo duplicando la "source of truth" con tabelle di tracking
- L'event sourcing è overkill per app semplici tipo "quante uova ci sono nello scaffale", ma per un conto corrente è la scelta naturale

